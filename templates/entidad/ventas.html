{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/registro_ventas.css' %}">
<div class="container-fluid">
    <h1 class="categories-title">CAJA N°{{ caja }}</h1>
    <table class="table-custom" id="tabla-registroventas">
        <thead>
            <tr>
                <th>VENTA N°</th>
                <th>EMPLEADO</th>
                <th>CLIENTE</th>
                <th>FECHA</th>
                <th>TOTAL</th>
                <th>MÉTODO DE PAGO</th>
                <th>OPCIONES</th>
            </tr>
        </thead>
        <tbody>
            {% for venta in ventas %}
                <tr>
                    <td>{{ venta.id }}</td>
                    <td>{{ venta.empleado }}</td>
                    <td>{{ venta.cliente }}</td>
                    <td>{{ venta.fecha }}</td>
                    <td>${{ venta.total }}</td>
                    <td>{{ venta.forma_pago|upper }}</td>
                    <td>
                        <button 
                            type="button" 
                            onclick='abrir_modal_edicion("{% url 'detalle_venta' venta.id %}")' 
                            class="btn btn-secondary">
                            VER
                        </button>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7" class="text-center">No hay ventas registradas.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Modal para edición -->
<div class="modal fade" id="edicion" tabindex="-1" aria-hidden="true" role="dialog">
</div>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
    var $ = jQuery.noConflict();
    function abrir_modal_edicion(url) {
        $('#edicion').load(url, function () {
            $(this).modal('show');
        });
    }
</script>
{% endblock %}

